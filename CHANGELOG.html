

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Changelog &mdash; tbot 0.8.0-20-g8a7bd5c documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Contributing to tbot" href="CONTRIBUTING.html" />
    <link rel="prev" title="tbot.tc - Builtin Testcases" href="modules/tc.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html">
          

          
            
            <img src="_static/tbot-logo-white.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.8.0-20-g8a7bd5c
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes.html">Recipes</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="migration.html">Migrating from tbot 0.7.1</a></li>
</ul>
<p class="caption"><span class="caption-text">Modules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="modules/main.html"><code class="docutils literal notranslate"><span class="pre">tbot</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/log.html"><code class="docutils literal notranslate"><span class="pre">tbot.log</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/machine.html"><code class="docutils literal notranslate"><span class="pre">tbot.machine</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/machine_linux.html"><code class="docutils literal notranslate"><span class="pre">tbot.machine.linux</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/machine_board.html"><code class="docutils literal notranslate"><span class="pre">tbot.machine.board</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/machine_connector.html"><code class="docutils literal notranslate"><span class="pre">tbot.machine.connector</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/machine_shell.html"><code class="docutils literal notranslate"><span class="pre">tbot.machine.shell</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/machine_channel.html"><code class="docutils literal notranslate"><span class="pre">tbot.machine.channel</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/selectable.html"><code class="docutils literal notranslate"><span class="pre">tbot.selectable</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/tc.html"><code class="docutils literal notranslate"><span class="pre">tbot.tc</span></code> - Builtin Testcases</a></li>
</ul>
<p class="caption"><span class="caption-text">Info</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Changelog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#unreleased">Unreleased</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#added">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fixed">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id1">0.8.0 - 2019-11-20</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="#changed">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#removed">Removed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id4">0.7.1 - 2019-03-14</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id5">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id6">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id7">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id8">0.7.0 - 2019-02-08</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id9">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id10">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id11">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id12">0.6.6 - 2019-01-18</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id13">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id14">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id15">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id16">0.6.5 - 2018-12-20</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id17">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id18">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id19">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id20">0.6.4 - 2018-12-05</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id21">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id22">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id23">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id24">0.6.3 - 2018-11-28</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id25">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id26">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id27">Removed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id28">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id29">0.6.2 - 2018-11-22</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id30">Added</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id31">0.6.1 - 2018-11-16</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id32">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id33">Changed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id34">0.6.0 - 2018-11-08</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id35">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id36">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id37">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#pre08-2018-10-29">0.6.0-pre08 - 2018-10-29</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id38">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id39">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id40">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#pre07-2018-10-25">0.6.0-pre07 - 2018-10-25</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id41">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id42">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id43">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#pre06-2018-10-11">0.6.0-pre06 - 2018-10-11</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id44">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id45">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id46">Fixed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id47">Removed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#pre05-2018-09-26">0.6.0-pre05 - 2018-09-26</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id48">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id49">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id50">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#pre04-2018-09-19">0.6.0-pre04 - 2018-09-19</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id51">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id52">Changed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#pre-2018-08-28">0.6.0-pre - 2018-08-28</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id53">0.3.4 - 2018-08-09</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id54">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id55">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id56">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id57">0.3.3 - 2018-07-20</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id58">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id59">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id60">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id61">0.3.2 - 2018-07-12</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id62">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id63">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id64">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id65">0.3.1 - 2018-06-22</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id66">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id67">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id68">Removed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id69">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id70">0.3.0 - 2018-06-15</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id71">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id72">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id73">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id74">0.2.4 - 2018-05-28</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id75">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id76">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id77">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id78">0.2.3 - 2018-05-16</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id79">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id80">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id81">Removed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id82">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id83">0.2.2 - 2018-05-15</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id84">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id85">Removed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id86">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id87">0.2.1 - 2018-05-14</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id88">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id89">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id90">0.2.0 - 2018-05-04</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id91">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id92">Fixed</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="CONTRIBUTING.html">Contributing to tbot</a></li>
<li class="toctree-l1"><a class="reference internal" href="LICENSE.html">License</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">tbot</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Changelog</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/CHANGELOG.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">

           <div itemprop="articleBody">
            
  <div class="section" id="changelog">
<h1>Changelog<a class="headerlink" href="#changelog" title="Permalink to this headline">¶</a></h1>
<div class="section" id="unreleased">
<h2><a class="reference external" href="https://github.com/Rahix/tbot/compare/v0.8.0...development">Unreleased</a><a class="headerlink" href="#unreleased" title="Permalink to this headline">¶</a></h2>
<div class="section" id="added">
<h3>Added<a class="headerlink" href="#added" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Added <code class="docutils literal notranslate"><span class="pre">LinuxShell.glob()</span></code> method for easily using shell globs.</p></li>
<li><p>Added parameters to <code class="docutils literal notranslate"><span class="pre">LinuxShell.subshell()</span></code> which can be used to spawn
custom subshells.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">linux.RedirBoth</span></code> to redirect both stdout and stderr to the same
file.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">UBootShell.ram_base</span></code> property to learn the RAM base address in
testcases.</p></li>
</ul>
</div>
<div class="section" id="fixed">
<h3>Fixed<a class="headerlink" href="#fixed" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fixed U-Boot and board-Linux not saving the bootlog to the log-event.</p></li>
<li><p>Fixed tbot happily printing special characters as part of a command which was
sent (in the log).</p></li>
<li><p>Fixed selftests failing in some rare circumstances because a subprocess
is not properly terminated.</p></li>
<li><p>Removed use of the deprecated <code class="docutils literal notranslate"><span class="pre">time.clock()</span></code> function.</p></li>
<li><p>Properly check stdout encoding.</p></li>
<li><p>Fixed <code class="docutils literal notranslate"><span class="pre">read_iter</span></code> sometimes passing negative timeout values to the
underlying channel IO.</p></li>
</ul>
</div>
</div>
<div class="section" id="id1">
<h2><a class="reference external" href="https://github.com/Rahix/tbot/compare/v0.7.1...v0.8.0">0.8.0</a> - 2019-11-20<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>The machine interface was completely overhauled.  Please read the <a class="reference external" href="https://tbot.tools/migration.html">migration
guide</a> for more info.</p>
<div class="section" id="id2">
<h3>Added<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&#64;tbot.with_lab</span></code>, <code class="docutils literal notranslate"><span class="pre">&#64;tbot.with_uboot</span></code>, and <code class="docutils literal notranslate"><span class="pre">&#64;tbot.with_linux</span></code> decorators to
make writing testcase much simpler</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">linux.RedirStdout(f)</span></code> &amp; <code class="docutils literal notranslate"><span class="pre">linux.RedirStderr(f)</span></code>: Redirect stdout and stderr symbols</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Machine.init()</span></code> hook to call custom code after the machine was initialized.
This can be used, for example, to init network manually in U-Boot.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tc.shell.check_for_tool()</span></code> testcase</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tbot.skip()</span></code>: Skip a testcase</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Machine.clone()</span></code>: Attempt creating a copy of a machine.  The two copies
allow parallel interaction with the same host.</p></li>
</ul>
</div>
<div class="section" id="changed">
<h3>Changed<a class="headerlink" href="#changed" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">linux.BuildMachine</span></code> is now a mixin called <code class="docutils literal notranslate"><span class="pre">linux.Builder</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">linux.LabHost</span></code> is now a mixin called <code class="docutils literal notranslate"><span class="pre">linux.Lab</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">linux.LinuxMachine</span></code> should be replaced by <code class="docutils literal notranslate"><span class="pre">linux.LinuxShell</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LabHost.new_channel()</span></code> was removed in favor of <code class="docutils literal notranslate"><span class="pre">LinuxShell.open_channel()</span></code>.
<code class="docutils literal notranslate"><span class="pre">open_channel()</span></code> consumes the machine it is called on which means the
equivalent to <code class="docutils literal notranslate"><span class="pre">new_channel()</span></code> now is:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">mach</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span> <span class="k">as</span> <span class="n">cl</span><span class="p">:</span>
    <span class="n">chan</span> <span class="o">=</span> <span class="n">cl</span><span class="o">.</span><span class="n">open_channel</span><span class="p">(</span><span class="s2">&quot;telnet&quot;</span><span class="p">,</span> <span class="s2">&quot;192.0.2.1&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="removed">
<h3>Removed<a class="headerlink" href="#removed" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">exec0(stdout=f)</span></code>: Redirection should be done using <code class="docutils literal notranslate"><span class="pre">RedirStdout</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">linux.Env(var)</span></code>: Environment-Variable substitution is hard to control.  It
is much easier to just use <code class="docutils literal notranslate"><span class="pre">mach.env(var)</span></code>.</p></li>
</ul>
</div>
<div class="section" id="id3">
<h3>Fixed<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Path.__fspath__()</span></code> erroneously returning a result, even though the contract
that is assumed with this method cannot be upheld by tbot.</p></li>
</ul>
</div>
</div>
<div class="section" id="id4">
<h2><a class="reference external" href="https://github.com/Rahix/tbot/compare/v0.7.0...v0.7.1">0.7.1</a> - 2019-03-14<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id5">
<h3>Added<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">tbot.acquire_local()</span></code>: Quick access to a localhost machine</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LinuxMachine.home</span></code>: Path to the current user’s home</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LocalLabHost.tbotdir</span></code>: tbot’s current working directory on the localhost (either
from where you ran <code class="docutils literal notranslate"><span class="pre">tbot</span></code> or the path given with <code class="docutils literal notranslate"><span class="pre">-C</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tbot.tc.kconfig</span></code>:  Testcases for modifying a kernel config file</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">login_delay</span></code>: Time to wait before logging in on the board.  This should
allow working with boards that clobber the console a lot during boot.</p></li>
</ul>
</div>
<div class="section" id="id6">
<h3>Changed<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Unknown parameters are now ignored if running multiple testcases so
you can specify parameters that are just relevant to a single one.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SSHMachine</span></code>s now use <code class="docutils literal notranslate"><span class="pre">NoneAuthenticator</span></code> by default.</p></li>
</ul>
</div>
<div class="section" id="id7">
<h3>Fixed<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">selftest</span></code>s sometimes failing if dropbear does not start fast enough</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SSHMachine</span></code>s using the local user’s home dir instead of the one on the
lab-host.</p></li>
<li><p>Local channels now correctly end the session which fixes weird bugs like
picocom not being able to reaquire the shell.</p></li>
</ul>
</div>
</div>
<div class="section" id="id8">
<h2><a class="reference external" href="https://github.com/Rahix/tbot/compare/v0.6.6...v0.7.0">0.7.0</a> - 2019-02-08<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id9">
<h3>Added<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Read commandline arguments from files:  You can now specify a file using
<code class="docutils literal notranslate"><span class="pre">&#64;filename</span></code> and each line from that file will be interpreted as a commandline
argument.</p></li>
<li><p>A man-page: <code class="docutils literal notranslate"><span class="pre">doc/tbot.1</span></code>!</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tbot.named_testcase</span></code>: Define testcases with a different name in log-files
than the function name.  The motivation is to reduce name ambiguity
(e.g. <code class="docutils literal notranslate"><span class="pre">uboot.build</span></code> and <code class="docutils literal notranslate"><span class="pre">linux.build</span></code> would both be called <code class="docutils literal notranslate"><span class="pre">build</span></code> in the
log).  This also affects the testcases name when calling it from the
commandline (you have to use the new name).</p></li>
</ul>
</div>
<div class="section" id="id10">
<h3>Changed<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>The U-Boot build testcase has been completely rewritten.  You will need to
adapt you board config to work with the new version:</p>
<ul class="simple">
<li><p>The build-info no longer exists, instead you define a <code class="docutils literal notranslate"><span class="pre">UBootBuilder</span></code>.  Take
a look at the docs to see available options.</p></li>
<li><p>The build attribute of your U-Boot machine must now be an <strong>instance</strong> of
your <code class="docutils literal notranslate"><span class="pre">UBootBuilder</span></code>, <strong>not</strong> the class itself.</p></li>
</ul>
<p>Example of the new config:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">tbot.machine</span> <span class="kn">import</span> <span class="n">board</span>
<span class="kn">from</span> <span class="nn">tbot.tc</span> <span class="kn">import</span> <span class="n">uboot</span>

<span class="k">class</span> <span class="nc">MyUBootBuilder</span><span class="p">(</span><span class="n">uboot</span><span class="o">.</span><span class="n">UBootBuilder</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;my-builder&quot;</span>
    <span class="n">defconfig</span> <span class="o">=</span> <span class="s2">&quot;my_defconfig&quot;</span>
    <span class="n">toolchain</span> <span class="o">=</span> <span class="s2">&quot;generic-armv7a-hf&quot;</span>

<span class="k">class</span> <span class="nc">MyUBootMachine</span><span class="p">(</span><span class="n">board</span><span class="o">.</span><span class="n">UBootMachine</span><span class="p">):</span>
    <span class="o">...</span>
    <span class="n">build</span> <span class="o">=</span> <span class="n">MyUBootBuilder</span><span class="p">()</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id11">
<h3>Fixed<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">boot_to_shell</span></code> is no longer a public method of <code class="docutils literal notranslate"><span class="pre">BoardLinux</span></code> machines.</p></li>
</ul>
</div>
</div>
<div class="section" id="id12">
<h2><a class="reference external" href="https://github.com/Rahix/tbot/compare/v0.6.5...v0.6.6">0.6.6</a> - 2019-01-18<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id13">
<h3>Added<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Graphviz <code class="docutils literal notranslate"><span class="pre">dot</span></code> diagram generator</p></li>
<li><p>New and improved documentation!</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LinuxMachine.fsroot</span></code>: A little convenience helper: You can now write
<code class="docutils literal notranslate"><span class="pre">mach.fsroot</span> <span class="pre">/</span> <span class="pre">&quot;proc/version&quot;</span></code> instead of <code class="docutils literal notranslate"><span class="pre">linux.Path(mach,</span> <span class="pre">&quot;/proc/version&quot;)</span></code></p></li>
</ul>
</div>
<div class="section" id="id14">
<h3>Changed<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>tbot no longer automatically creates a log file.  If you want
the previous behavior, use <code class="docutils literal notranslate"><span class="pre">--log-auto</span></code>.  <code class="docutils literal notranslate"><span class="pre">--log=&lt;file&gt;</span></code> will
still behave as before.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">generators/generate_htmllog.py</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">generators/htmllog.py</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">generators/debug_messages.py</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">generators/messages.py</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UBootMachine.env()</span></code> now also accepts <code class="docutils literal notranslate"><span class="pre">board.Special</span></code>s.</p></li>
</ul>
</div>
<div class="section" id="id15">
<h3>Fixed<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Duplication warning when star-importing another testcase-file.</p></li>
</ul>
</div>
</div>
<div class="section" id="id16">
<h2><a class="reference external" href="https://github.com/Rahix/tbot/compare/v0.6.4...v0.6.5">0.6.5</a> - 2018-12-20<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id17">
<h3>Added<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">Machine.lh</span></code>: You can access the lab-host from every machine now.  The idea
behind this is to allow access to lab-specific configuration in a much
easier way.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mach.env()</span></code> can now be used to set environment variables as well:
<code class="docutils literal notranslate"><span class="pre">env(&quot;name&quot;,</span> <span class="pre">&quot;value&quot;)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-p</span></code> for setting testcase parameters.  Provided values are parsed
using <code class="docutils literal notranslate"><span class="pre">eval</span></code>, so be careful … Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ tbot -p <span class="nv">int_param</span><span class="o">=</span><span class="m">42</span> -p <span class="nv">boolean</span><span class="o">=</span>True -p <span class="nv">string</span><span class="o">=</span><span class="se">\&#39;</span>str<span class="se">\&#39;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id18">
<h3>Changed<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>You can now use <code class="docutils literal notranslate"><span class="pre">--log=</span></code> to suppress the creation of a log file.</p></li>
</ul>
</div>
<div class="section" id="id19">
<h3>Fixed<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">selftest_path_stat</span></code> assuming the existence of <code class="docutils literal notranslate"><span class="pre">/dev/sda</span></code>, which makes
it fail on systems without this block device.</p></li>
<li><p>tbot will now only color its output if appropriate.
It honors <a class="reference external" href="https://bixense.com/clicolors/">CLICOLOR</a>.</p></li>
</ul>
</div>
</div>
<div class="section" id="id20">
<h2><a class="reference external" href="https://github.com/Rahix/tbot/compare/v0.6.3...v0.6.4">0.6.4</a> - 2018-12-05<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id21">
<h3>Added<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-C</span></code> parameter to allow setting a different working directory</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">${TBOTPATH}</span></code> environment variable to provide additional testcase
directories; <code class="docutils literal notranslate"><span class="pre">TBOTPATH</span></code> is a <code class="docutils literal notranslate"><span class="pre">:</span></code> separated list of directorie</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">auth.NoneAuthenticator</span></code>: Authenticator without key nor password, useful
if ssh can figure authentication out by itself (eg with ssh-agent)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GitRepository.apply</span></code>: Apply patches without committing the changes</p></li>
</ul>
</div>
<div class="section" id="id22">
<h3>Changed<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">linux.shell</span></code>: Shells now have a <code class="docutils literal notranslate"><span class="pre">shell.command</span></code>, which allows specifying
a command to run the shell.  For example, bash is run using <code class="docutils literal notranslate"><span class="pre">bash</span> <span class="pre">--norc</span></code>
now.</p></li>
</ul>
</div>
<div class="section" id="id23">
<h3>Fixed<a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>timeout in <code class="docutils literal notranslate"><span class="pre">read_until_prompt</span></code> sometimes being negative</p></li>
<li><p>log missing bootlog for U-Boot if no autoboot is configured</p></li>
<li><p>tbot ignored ssh host aliases (ref #8)</p></li>
</ul>
</div>
</div>
<div class="section" id="id24">
<h2><a class="reference external" href="https://github.com/Rahix/tbot/compare/v0.6.2...v0.6.3">0.6.3</a> - 2018-11-28<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id25">
<h3>Added<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">tbot.log.warning</span></code>: Print a warning message</p></li>
<li><p>If tbot fails to load a testcase source, it will now show the
traceback that caused the failure</p></li>
</ul>
</div>
<div class="section" id="id26">
<h3>Changed<a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Show any and all output that is received on the channel with <code class="docutils literal notranslate"><span class="pre">-vvv</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BoardLinuxMachine</span></code> now allows the login and password prompts to
be clobbered</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BoardLinuxMachine</span></code> login now waits for the shell to respond</p></li>
</ul>
</div>
<div class="section" id="id27">
<h3>Removed<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">login_wait</span></code> config parameter from <code class="docutils literal notranslate"><span class="pre">BoardLinuxMachine</span></code>.  This “hack”
is superseded by the more robust login implementation now.</p></li>
</ul>
</div>
<div class="section" id="id28">
<h3>Fixed<a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">importlib.util</span></code> needs to be manually imported on some python versions</p></li>
</ul>
</div>
</div>
<div class="section" id="id29">
<h2><a class="reference external" href="https://github.com/Rahix/tbot/compare/v0.6.1...v0.6.2">0.6.2</a> - 2018-11-22<a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id30">
<h3>Added<a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Machine.env</span></code>: Easily get the value of an environment variable</p></li>
<li><p>Allow specifying a command when spawning a subshell.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ub.bootlog</span></code> and <code class="docutils literal notranslate"><span class="pre">lnx.bootlog</span></code> to allow accessing the bootlog (ref #5)</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">SSHMachine.ssh_config</span></code>: List of additional ssh config options</p></li>
</ul>
</div>
</div>
<div class="section" id="id31">
<h2><a class="reference external" href="https://github.com/Rahix/tbot/compare/v0.6.0...v0.6.1">0.6.1</a> - 2018-11-16<a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id32">
<h3>Added<a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Proper buildhost support + U-Boot build testcase</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GitRepository</span></code> now fetches latest changes from remote by default</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LinuxMachine.subshell</span></code>: Spawn subshell to isolate context changes</p></li>
</ul>
</div>
<div class="section" id="id33">
<h3>Changed<a class="headerlink" href="#id33" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Allow setting <code class="docutils literal notranslate"><span class="pre">autoboot_prompt</span></code> to <code class="docutils literal notranslate"><span class="pre">None</span></code>, if the board automatically drops
into a U-Boot shell.</p></li>
<li><p>Testcase directories are now traversed recurively</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SSHLabHost</span></code> now attempts to use values from <code class="docutils literal notranslate"><span class="pre">~/.ssh/config</span></code> if available.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SSHMachine</span></code>: Use labhost’s username by default</p></li>
</ul>
</div>
</div>
<div class="section" id="id34">
<h2><a class="reference external" href="https://github.com/Rahix/tbot/compare/v0.6.0-pre08...v0.6.0">0.6.0</a> - 2018-11-08<a class="headerlink" href="#id34" title="Permalink to this headline">¶</a></h2>
<p>Version 0.6.0 is finally here!  It is a complete rewrite so none of the old
stuff is relevant any more.  The changelog below is not everything that was
changed, but the changes since the last prerelease (<code class="docutils literal notranslate"><span class="pre">0.6.0-pre08</span></code>).</p>
<div class="section" id="id35">
<h3>Added<a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">mach.test()</span></code> to just check the return code of a command</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">linux.F</span></code>, <code class="docutils literal notranslate"><span class="pre">board.F</span></code>: Formatter with TBot support</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">max</span></code> parameter for <code class="docutils literal notranslate"><span class="pre">Channel.recv()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">recv_n</span></code> method for <code class="docutils literal notranslate"><span class="pre">Channel</span></code> to read exactly N bytes</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ignore_hostkey</span></code> in <code class="docutils literal notranslate"><span class="pre">SSHLabHost</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">console_check</span></code> hook to prevent racey board connections
from multiple developers</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LinuxWithUBootMachine.do_boot</span></code> for a more flexible
<code class="docutils literal notranslate"><span class="pre">boot_commands</span></code> definition</p></li>
</ul>
</div>
<div class="section" id="id36">
<h3>Changed<a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Improved testrun end handling</p></li>
<li><p>Made <code class="docutils literal notranslate"><span class="pre">SSHMachine</span></code> more userfriendly; now shows ssh errors in log</p></li>
<li><p>Made <code class="docutils literal notranslate"><span class="pre">shell</span></code> mandatory for <code class="docutils literal notranslate"><span class="pre">BoardLinux</span></code> machines</p></li>
</ul>
</div>
<div class="section" id="id37">
<h3>Fixed<a class="headerlink" href="#id37" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">shell.copy</span></code> sometimes not respecting <code class="docutils literal notranslate"><span class="pre">ignore_hostkey</span></code> flag</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">shell.copy</span></code> relying on an ugly hack that breaks on some python versions</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Verbosity</span></code> being in the wrong format in log events</p></li>
</ul>
</div>
</div>
<div class="section" id="pre08-2018-10-29">
<h2><a class="reference external" href="https://github.com/Rahix/tbot/compare/v0.6.0-pre07...v0.6.0-pre08">0.6.0-pre08</a> - 2018-10-29<a class="headerlink" href="#pre08-2018-10-29" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id38">
<h3>Added<a class="headerlink" href="#id38" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Selftest that fails intentionally</p></li>
</ul>
</div>
<div class="section" id="id39">
<h3>Changed<a class="headerlink" href="#id39" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><em>Internal</em>: <code class="docutils literal notranslate"><span class="pre">Board</span></code> no longer manages the boot-logevent as that breaks
when no BoardMachine follows up</p></li>
</ul>
</div>
<div class="section" id="id40">
<h3>Fixed<a class="headerlink" href="#id40" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>HTMLLog generater producing bad HTML because of some log issues</p></li>
</ul>
</div>
</div>
<div class="section" id="pre07-2018-10-25">
<h2><a class="reference external" href="https://github.com/Rahix/tbot/compare/v0.6.0-pre06...v0.6.0-pre07">0.6.0-pre07</a> - 2018-10-25<a class="headerlink" href="#pre07-2018-10-25" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id41">
<h3>Added<a class="headerlink" href="#id41" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Password support in <code class="docutils literal notranslate"><span class="pre">shell.copy</span></code></p></li>
<li><p>Recipes in documentation</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Board.cleanup</span></code>, <code class="docutils literal notranslate"><span class="pre">Channel.register_cleanup</span></code>, ability to register a hook
for cleaning a channel.  Might help if some lockfiles are kept when TBot
just kills a connection.</p></li>
<li><p>Support for copying from <code class="docutils literal notranslate"><span class="pre">LocalLabHost()</span></code> to <code class="docutils literal notranslate"><span class="pre">SSHLabHost()</span></code> and the other
way around.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GitRepository.symbolic_head</span></code> to get current branch name</p></li>
</ul>
</div>
<div class="section" id="id42">
<h3>Changed<a class="headerlink" href="#id42" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">GitRepository.bisect</span></code> now ensures that the good revision is actually good
and the current revision is actually bad.</p></li>
</ul>
</div>
<div class="section" id="id43">
<h3>Fixed<a class="headerlink" href="#id43" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fix failures not leading to error return code</p></li>
<li><p>Better error message if a board/lab was not found</p></li>
<li><p>Stdout showing password prompt late</p></li>
<li><p>Remove some escape sequences from log output to keep it tidy</p></li>
</ul>
</div>
</div>
<div class="section" id="pre06-2018-10-11">
<h2><a class="reference external" href="https://github.com/Rahix/tbot/compare/v0.6.0-pre05...v0.6.0-pre06">0.6.0-pre06</a> - 2018-10-11<a class="headerlink" href="#pre06-2018-10-11" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id44">
<h3>Added<a class="headerlink" href="#id44" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Reimplemented Logging. The following generators have been updated:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">htmllog</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">junit</span></code></p></li>
</ul>
</li>
<li><p>Support for password authentication on SSH machines.  <strong>I strongly
reccomend not using this!</strong></p></li>
</ul>
</div>
<div class="section" id="id45">
<h3>Changed<a class="headerlink" href="#id45" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Updated documentation</p></li>
</ul>
</div>
<div class="section" id="id46">
<h3>Fixed<a class="headerlink" href="#id46" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fixed pre-commit selftest hook creating log files</p></li>
</ul>
</div>
<div class="section" id="id47">
<h3>Removed<a class="headerlink" href="#id47" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Unnecessary files from pre 0.6 versions</p></li>
</ul>
</div>
</div>
<div class="section" id="pre05-2018-09-26">
<h2><a class="reference external" href="https://github.com/Rahix/tbot/compare/v0.6.0-pre04...v0.6.0-pre05">0.6.0-pre05</a> - 2018-09-26<a class="headerlink" href="#pre05-2018-09-26" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id48">
<h3>Added<a class="headerlink" href="#id48" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">verbosity</span></code> parameter for <code class="docutils literal notranslate"><span class="pre">log.message</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ignore_hostkey</span></code> flag for <code class="docutils literal notranslate"><span class="pre">SSHMachine</span></code>s</p></li>
</ul>
</div>
<div class="section" id="id49">
<h3>Changed<a class="headerlink" href="#id49" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>More robust completions</p></li>
</ul>
</div>
<div class="section" id="id50">
<h3>Fixed<a class="headerlink" href="#id50" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Program name in help and version message was wrong</p></li>
<li><p>Better error messages when a testcase file can’t be loaded</p></li>
<li><p>Selftests failing because sshd host key changes</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GitRepository</span></code> failing to reset in <code class="docutils literal notranslate"><span class="pre">__init__</span></code></p></li>
</ul>
</div>
</div>
<div class="section" id="pre04-2018-09-19">
<h2><a class="reference external" href="https://github.com/Rahix/tbot/compare/v0.6.0-pre...v0.6.0-pre04">0.6.0-pre04</a> - 2018-09-19<a class="headerlink" href="#pre04-2018-09-19" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id51">
<h3>Added<a class="headerlink" href="#id51" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">GitRepository.head</span></code>: Get the current position of <code class="docutils literal notranslate"><span class="pre">HEAD</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GitRepository.bisect</span></code>: Bisect the git repo to find the commit
which introduced a bug.</p></li>
<li><p>Show durations of testcase runs.</p></li>
</ul>
</div>
<div class="section" id="id52">
<h3>Changed<a class="headerlink" href="#id52" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Moved package metadata into <code class="docutils literal notranslate"><span class="pre">__about__.py</span></code></p></li>
<li><p>Always show long version in documentation</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">shell.copy</span></code> can now copy from and to SSHMachines.</p></li>
</ul>
</div>
</div>
<div class="section" id="pre-2018-08-28">
<h2><a class="reference external" href="https://github.com/Rahix/tbot/compare/v0.3.4...v0.6.0-pre">0.6.0-pre</a> - 2018-08-28<a class="headerlink" href="#pre-2018-08-28" title="Permalink to this headline">¶</a></h2>
<p>Version <strong>0.6.0</strong> is basically a complete rewrite of TBot.  A rough summary of changes:</p>
<ul class="simple">
<li><p>Be as <em>pythonic</em> as possible, the old version had a big issue of non pythonic patterns
making things that should be easy difficult.</p></li>
<li><p>More static guarantees. New TBot can guarantee even more when checking your testcases with
a static typechecker.  A big new feature in that regard is static guarantee of never using
a path with a wrong machine!</p></li>
<li><p>Cleaner and much smaller codebase.  Every piece of code is written as small and pythonic
as possible which has made the codebase much more manageable.</p></li>
<li><p>Speedups! New TBot can complete its selfchecks in under 1s. This is possible because of a
new channel API that no longer uses sleep unless absolutely necessary.</p></li>
<li><p>Much more stable and predictable.  Even more care was taken in making TBot behave as predictable
as possible and reducing side effects.</p></li>
</ul>
</div>
<div class="section" id="id53">
<h2><a class="reference external" href="https://github.com/Rahix/tbot/compare/v0.3.3...v0.3.4">0.3.4</a> - 2018-08-09<a class="headerlink" href="#id53" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id54">
<h3>Added<a class="headerlink" href="#id54" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">TestcaseFailure</span></code> &amp; <code class="docutils literal notranslate"><span class="pre">InvalidUsageException</span></code> exceptions</p></li>
</ul>
</div>
<div class="section" id="id55">
<h3>Changed<a class="headerlink" href="#id55" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Better error message when testcase does not exist</p></li>
<li><p>More explicit exceptions</p></li>
</ul>
</div>
<div class="section" id="id56">
<h3>Fixed<a class="headerlink" href="#id56" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fixed TBot ignoring failures while applying patches (#13)</p></li>
<li><p>Fixed -d not being allowed between board and testcase (#6)</p></li>
</ul>
</div>
</div>
<div class="section" id="id57">
<h2><a class="reference external" href="https://github.com/Rahix/tbot/compare/v0.3.2...v0.3.3">0.3.3</a> - 2018-07-20<a class="headerlink" href="#id57" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id58">
<h3>Added<a class="headerlink" href="#id58" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">uboot.shell.autboot-keys</span></code>: Custom key sequence for intercepting
autoboot (#9)</p></li>
<li><p>Warning if an invalid testcase file is in the path (TBot no longer
refuses to do anything, in this case)</p></li>
</ul>
</div>
<div class="section" id="id59">
<h3>Changed<a class="headerlink" href="#id59" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Made scp config settings consistent with ssh settings (#10)</p></li>
</ul>
</div>
<div class="section" id="id60">
<h3>Fixed<a class="headerlink" href="#id60" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fixed TBot still clogging the user’s history with commands (#7)</p></li>
<li><p>Fixed testcase files not being able to import local submodules</p></li>
<li><p>Fixed TBot errors being shown when attempting testcase completion (#11)</p></li>
</ul>
</div>
</div>
<div class="section" id="id61">
<h2><a class="reference external" href="https://github.com/Rahix/tbot/compare/v0.3.1...v0.3.2">0.3.2</a> - 2018-07-12<a class="headerlink" href="#id61" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id62">
<h3>Added<a class="headerlink" href="#id62" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Comments in files generated by <code class="docutils literal notranslate"><span class="pre">tbot-mgr</span></code> to explain
config options</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-s</span></code>, <code class="docutils literal notranslate"><span class="pre">--show</span></code> command line option to get information about
testcases</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">warning</span></code> and <code class="docutils literal notranslate"><span class="pre">error</span></code> log message functions</p></li>
</ul>
</div>
<div class="section" id="id63">
<h3>Changed<a class="headerlink" href="#id63" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Removed <code class="docutils literal notranslate"><span class="pre">ssh_command</span></code> and added <code class="docutils literal notranslate"><span class="pre">ssh_flags</span></code> instead. This allows TBot
to have more control over ssh</p></li>
</ul>
</div>
<div class="section" id="id64">
<h3>Fixed<a class="headerlink" href="#id64" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fixed TBot hanging when SSH asks for a password</p></li>
<li><p>Fixed git bisecting</p></li>
</ul>
</div>
</div>
<div class="section" id="id65">
<h2><a class="reference external" href="https://github.com/Rahix/tbot/compare/v0.3.0...v0.3.1">0.3.1</a> - 2018-06-22<a class="headerlink" href="#id65" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id66">
<h3>Added<a class="headerlink" href="#id66" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">tbot-mgr</span></code>: A script for managing TBot configs</p></li>
<li><p>Testcases for building Linux</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">interactive_build_uboot</span></code> and <code class="docutils literal notranslate"><span class="pre">interactive_build_linux</span></code></p></li>
<li><p>Selftests are now run as a pre-commit hook</p></li>
<li><p>A dummy lab and board for running selftests
that are as generic as possible</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">linux.revision</span></code> and <code class="docutils literal notranslate"><span class="pre">uboot.revision</span></code> config keys</p></li>
</ul>
</div>
<div class="section" id="id67">
<h3>Changed<a class="headerlink" href="#id67" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>git testcases now have a <code class="docutils literal notranslate"><span class="pre">rev</span></code> parameter for checking out a specific
revision</p></li>
</ul>
</div>
<div class="section" id="id68">
<h3>Removed<a class="headerlink" href="#id68" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>DENX specific configs</p></li>
</ul>
</div>
<div class="section" id="id69">
<h3>Fixed<a class="headerlink" href="#id69" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>A crash while checking the config</p></li>
</ul>
</div>
</div>
<div class="section" id="id70">
<h2><a class="reference external" href="https://github.com/Rahix/tbot/compare/v0.2.4...v0.3.0">0.3.0</a> - 2018-06-15<a class="headerlink" href="#id70" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id71">
<h3>Added<a class="headerlink" href="#id71" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><strong>Buildhosts:</strong> This release adds the ability to build U-Boot/Linux
on a separate machine. This will reduce load on your labhost if multiple
people are using it</p></li>
<li><p>You can now disable documentation for a testcase by passing
<code class="docutils literal notranslate"><span class="pre">doc=False</span></code> to <code class="docutils literal notranslate"><span class="pre">tb.call</span></code></p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">-i/--interactive</span></code> commandline flag that will make TBot wait for user
confirmation for each command it wants to execute. Use this if you are unsure
whether your testcase will do anything harmful, because you can intervene if a
critical command has ie. wrong parameters</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">retrieve_build_artifact</span></code> and <code class="docutils literal notranslate"><span class="pre">tbot_clean_builddir</span></code> tasks</p></li>
<li><p>Added a new config key <code class="docutils literal notranslate"><span class="pre">build.local</span></code> that defines the buildhost that is the
labhost itself</p></li>
<li><p>More tests in <code class="docutils literal notranslate"><span class="pre">check_config</span></code></p></li>
<li><p>Better documentation</p></li>
</ul>
</div>
<div class="section" id="id72">
<h3>Changed<a class="headerlink" href="#id72" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">uboot_checkout</span></code> now checks out U-Boot onto the default buildhost by default</p></li>
<li><p>U-Boot is built on the buildhost by defalt, you need to use <code class="docutils literal notranslate"><span class="pre">retrieve_build_artifact</span></code>
to copy binaries to the labhost</p></li>
<li><p>Renamed <code class="docutils literal notranslate"><span class="pre">tbot_check_config</span></code> to <code class="docutils literal notranslate"><span class="pre">check_config</span></code></p></li>
</ul>
</div>
<div class="section" id="id73">
<h3>Fixed<a class="headerlink" href="#id73" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Removed an unnecessary shell check from U-Boot tests</p></li>
<li><p>Fixed TBot “leaking” from a with statement</p></li>
</ul>
</div>
</div>
<div class="section" id="id74">
<h2><a class="reference external" href="https://github.com/Rahix/tbot/compare/v0.2.3...v0.2.4">0.2.4</a> - 2018-05-28<a class="headerlink" href="#id74" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id75">
<h3>Added<a class="headerlink" href="#id75" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>pre-commit hook config, run <code class="docutils literal notranslate"><span class="pre">pre-commit</span> <span class="pre">install</span></code> to use these
hooks.</p></li>
<li><p>Checks for malformed commands (eg. running <code class="docutils literal notranslate"><span class="pre">exit</span></code> or a command that
contains a <code class="docutils literal notranslate"><span class="pre">\n</span></code>)</p></li>
</ul>
</div>
<div class="section" id="id76">
<h3>Changed<a class="headerlink" href="#id76" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Use flake8 instead of pylint</p></li>
<li><p>Reformat using black</p></li>
</ul>
</div>
<div class="section" id="id77">
<h3>Fixed<a class="headerlink" href="#id77" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fix the config not being properly installed and thus TBot not
working outside a development environment</p></li>
<li><p>Small visual errors that were created when moving to the
new logger</p></li>
</ul>
</div>
</div>
<div class="section" id="id78">
<h2><a class="reference external" href="https://github.com/Rahix/tbot/compare/v0.2.2...v0.2.3">0.2.3</a> - 2018-05-16<a class="headerlink" href="#id78" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id79">
<h3>Added<a class="headerlink" href="#id79" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>New singleton logger <code class="docutils literal notranslate"><span class="pre">tbot.log</span></code></p></li>
<li><p>Warning when trying to generate documentation
from unsuccessful TBot runs</p></li>
</ul>
</div>
<div class="section" id="id80">
<h3>Changed<a class="headerlink" href="#id80" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The old logger was replaced by a new singleton implementation.
This solves a few issues where the logger was not available
when it should have been. Also, logging is a prime example for
where to use a singleton. This will ensure that stdout is only
used in one place and things don’t get messy …</p></li>
</ul>
</div>
<div class="section" id="id81">
<h3>Removed<a class="headerlink" href="#id81" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Old <code class="docutils literal notranslate"><span class="pre">tbot.logger</span></code> module and it’s <code class="docutils literal notranslate"><span class="pre">LogEvent</span></code>’s</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TBot.log</span></code></p></li>
</ul>
</div>
<div class="section" id="id82">
<h3>Fixed<a class="headerlink" href="#id82" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>U-Boot bootlog was not shown in very-verbose logging</p></li>
<li><p>Documentation links not working properly</p></li>
<li><p>The interactive shells were not properly handling the
receival of multiple bytes at once, this is fixed now</p></li>
<li><p>Path expansion in completions is now handled properly</p></li>
</ul>
</div>
</div>
<div class="section" id="id83">
<h2><a class="reference external" href="https://github.com/Rahix/tbot/compare/v0.2.1...v0.2.2">0.2.2</a> - 2018-05-15<a class="headerlink" href="#id83" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id84">
<h3>Added<a class="headerlink" href="#id84" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><strong>Commandline testcase parameters</strong>: You can now pass parameters
to testcases from the commandline using the <code class="docutils literal notranslate"><span class="pre">-p</span></code> or <code class="docutils literal notranslate"><span class="pre">--param</span></code>
commandline parameter</p></li>
<li><p>Completions for logfile</p></li>
<li><p>More config documentation</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">shell_utils.command_and_retval</span></code>: Run a command on a channel
and get it’s return code</p></li>
</ul>
</div>
<div class="section" id="id85">
<h3>Removed<a class="headerlink" href="#id85" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&#64;cmdline</span></code> decorator. All testcases are now callable from
the commandline, for some you will need to use the new <code class="docutils literal notranslate"><span class="pre">-p</span></code>
option to work properly</p></li>
</ul>
</div>
<div class="section" id="id86">
<h3>Fixed<a class="headerlink" href="#id86" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Completions for <code class="docutils literal notranslate"><span class="pre">-c</span></code> were not always properly handled
(<code class="docutils literal notranslate"><span class="pre">=</span></code> messed with argument splitting)</p></li>
</ul>
</div>
</div>
<div class="section" id="id87">
<h2><a class="reference external" href="https://github.com/Rahix/tbot/compare/v0.2.0...v0.2.1">0.2.1</a> - 2018-05-14<a class="headerlink" href="#id87" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id88">
<h3>Changed<a class="headerlink" href="#id88" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Disable writing to history when setting up a channel</p></li>
<li><p>Implement cleanup in interactive testcases so user code can continue
after finishing an interactive session</p></li>
</ul>
</div>
<div class="section" id="id89">
<h3>Fixed<a class="headerlink" href="#id89" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fix KeyErrors not displaying the full path to the failing key</p></li>
</ul>
</div>
</div>
<div class="section" id="id90">
<h2>0.2.0 - 2018-05-04<a class="headerlink" href="#id90" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id91">
<h3>Changed<a class="headerlink" href="#id91" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Use custom bash completions instead of argcomplete</p></li>
<li><p>Make the HTMLLog generator use a template. Eases development
and reduces clutter in the source file. Also, the html logs
no longer depend on the existence of the css file</p></li>
<li><p>Implement better quiet handling. Adjust the verbosity
levels of some log messages to ensure they are displayed
when they should be</p></li>
</ul>
</div>
<div class="section" id="id92">
<h3>Fixed<a class="headerlink" href="#id92" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fix testcase EXPORTS. Exports are now in a separate file
that is loaded before everything else. This should fix
some testcases not working because exports they depend on
were loaded later</p></li>
<li><p>Fix <code class="docutils literal notranslate"><span class="pre">call_then</span></code> not returning the function itself</p></li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
    <a href="https://github.com/Rahix/tbot">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub">
    </a>

          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="CONTRIBUTING.html" class="btn btn-neutral float-right" title="Contributing to tbot" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="modules/tc.html" class="btn btn-neutral float-left" title="tbot.tc - Builtin Testcases" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Rahix

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>